import{s as T}from"./request-Bb0hX5IM.js";import{d as We,r as y,a as R,$ as Xe,k as Ze,E as g,c as $,e as t,w as l,g as x,o as k,O as et,b as n,h as d,P as tt,D as ue,y as c,K as pe,L as me,a0 as ve,A as q,_ as lt}from"./index-DhDhwFZx.js";function ot(V){return T({url:"/member/list",method:"get",params:V})}function at(V){return T({url:"/member",method:"post",data:V})}function nt(V,D){return T({url:`/member/${V}`,method:"put",data:D})}function st(){return T({url:"/member/statistics",method:"get"})}function dt(){return T({url:"/member-level/list",method:"get"})}function rt(V){return T({url:"/member-level",method:"post",data:V})}function it(V,D){return T({url:`/member-level/${V}`,method:"put",data:D})}function ut(V){return T({url:`/member-level/${V}`,method:"delete"})}function pt(V,D){return T({url:`/member-level/${V}/status`,method:"put",data:{status:D}})}const mt={class:"member-container"},bt={class:"card-header"},ft={class:"member-operation-buttons"},gt={class:"member-operation-buttons"},ct={class:"pagination-container"},vt={class:"card-header"},xt={class:"stat-card"},yt={class:"stat-value"},_t={class:"stat-desc"},ht={class:"stat-card",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},wt={class:"stat-value"},Vt={class:"stat-desc"},Ct={class:"stat-card",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},kt={class:"stat-value"},Ft={class:"stat-desc"},Mt={class:"stat-card",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"}},$t={class:"stat-value"},Dt={class:"stat-desc"},Ut={class:"card-header"},Rt={key:0,style:{height:"300px",display:"flex","align-items":"center","justify-content":"center"}},Tt={style:{width:"100%",height:"100%",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},At={style:{display:"flex","flex-wrap":"wrap","justify-content":"center",gap:"15px"}},Et={class:"card-header"},Lt={key:0,style:{height:"300px",padding:"20px"}},Nt={style:{height:"100%",display:"flex","align-items":"flex-end","justify-content":"space-around"}},St={style:{"margin-top":"8px","text-align":"center","font-size":"12px"}},jt={style:{color:"#606266"}},Bt={class:"card-header"},zt={style:{height:"300px",padding:"20px"}},Ot={style:{height:"100%",display:"flex","flex-direction":"column"}},It={style:{flex:"1",position:"relative","border-bottom":"1px solid #EBEEF5","border-left":"1px solid #EBEEF5"}},qt={width:"100%",height:"100%",style:{position:"absolute",top:"0",left:"0"}},Pt={style:{height:"30px",display:"flex","justify-content":"space-around","margin-left":"40px"}},Gt={class:"dialog-footer"},Yt={class:"dialog-footer"},Ht={class:"dialog-footer"},Qt={class:"dialog-footer"},Kt=We({__name:"index",setup(V){const D=y("list"),J=y("chart"),W=y("chart"),P=y("week"),i=R({pageNum:1,pageSize:10,name:"",phone:"",level:"",status:""}),X=y(),u=R({id:"",memberNo:"",name:"",phone:"",gender:1,birthday:"",level:"普通会员",address:"",remark:""}),Z=y(),v=R({memberId:"",memberName:"",currentBalance:"",amount:0,paymentMethod:"cash",remark:""}),ee=y(),f=R({memberId:"",memberName:"",currentPoints:"",adjustType:"add",points:0,reason:""}),xe=R({name:[{required:!0,message:"请输入会员姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],level:[{required:!0,message:"请选择会员等级",trigger:"change"}]}),ye=R({amount:[{required:!0,message:"请输入充值金额",trigger:"blur"}],paymentMethod:[{required:!0,message:"请选择支付方式",trigger:"change"}]}),_e=R({adjustType:[{required:!0,message:"请选择调整类型",trigger:"change"}],points:[{required:!0,message:"请输入调整积分",trigger:"blur"}],reason:[{required:!0,message:"请输入调整原因",trigger:"blur"}]}),te=y(!1),le=y(0),M=y([{id:"1",memberNo:"M20250001",name:"张三",phone:"13800138001",gender:1,birthday:"1990-01-15",level:"黄金会员",points:1250,balance:500,totalConsumption:5680.5,status:1,address:"北京市朝阳区xxx街道xxx号",createTime:"2025-01-15 10:30:00",remark:""},{id:"2",memberNo:"M20250002",name:"李四",phone:"13800138002",gender:1,birthday:"1985-05-20",level:"白银会员",points:800,balance:200,totalConsumption:3200.8,status:1,address:"北京市海淀区xxx街道xxx号",createTime:"2025-02-10 14:20:00",remark:""},{id:"3",memberNo:"M20250003",name:"王五",phone:"13800138003",gender:0,birthday:"1992-08-10",level:"普通会员",points:300,balance:50,totalConsumption:1200.3,status:1,address:"北京市丰台区xxx街道xxx号",createTime:"2025-03-05 09:15:00",remark:""}]),h=y({totalMembers:1256,newMembersThisMonth:89,activeMembers:856,activeRate:68.2,totalConsumption:125680,consumptionGrowth:15.6,avgOrderAmount:87.5,avgOrderGrowth:8.3}),oe=y([{level:"普通会员",count:680,percentage:"54.1%"},{level:"白银会员",count:320,percentage:"25.5%"},{level:"黄金会员",count:180,percentage:"14.3%"},{level:"钻石会员",count:76,percentage:"6.1%"}]),ae=y([{rank:1,name:"张三",consumption:5680.5},{rank:2,name:"李四",consumption:4520.8},{rank:3,name:"王五",consumption:3890.2},{rank:4,name:"赵六",consumption:3456.7},{rank:5,name:"孙七",consumption:2980.9}]),F=y([]),ne=y(),r=R({id:"",name:"",discount:100,minConsumption:0,pointsRatio:100,benefits:"",color:"#67C23A",status:1,sortOrder:1,isDefault:!1}),L=y(!1),se=y(""),j=y(!1),B=y(!1),N=y(!1),de=y(""),he=R({name:[{required:!0,message:"请输入等级名称",trigger:"blur"}],discount:[{required:!0,message:"请输入折扣率",trigger:"blur"}],minConsumption:[{required:!0,message:"请输入升级条件",trigger:"blur"}],pointsRatio:[{required:!0,message:"请输入积分比例",trigger:"blur"}],benefits:[{required:!0,message:"请输入会员权益",trigger:"blur"}]});Xe(D,a=>{a==="list"?U():a==="levels"?G():a==="stats"&&be()}),Ze(()=>{U(),G(),be()});const G=async()=>{try{const a=await dt();a.code===200?F.value=a.data||[]:(console.error("获取会员等级失败:",a.message),F.value=[{id:"1",name:"普通会员",discount:100,minConsumption:0,pointsRatio:100,benefits:"基础积分奖励",color:"#67C23A",status:1,isDefault:!0,sort:1},{id:"2",name:"白银会员",discount:98,minConsumption:1e3,pointsRatio:110,benefits:"98折优惠，积分1.1倍奖励",color:"#909399",status:1,isDefault:!1,sort:2},{id:"3",name:"黄金会员",discount:95,minConsumption:5e3,pointsRatio:120,benefits:"95折优惠，积分1.2倍奖励，生日特权",color:"#E6A23C",status:1,isDefault:!1,sort:3},{id:"4",name:"钻石会员",discount:90,minConsumption:2e4,pointsRatio:150,benefits:"9折优惠，积分1.5倍奖励，专属客服，优先配送",color:"#F56C6C",status:1,isDefault:!1,sort:4}])}catch(a){console.error("获取会员等级失败:",a),F.value=[{id:"1",name:"普通会员",discount:100,minConsumption:0,pointsRatio:100,benefits:"基础积分奖励",color:"#67C23A",status:1,isDefault:!0,sort:1},{id:"2",name:"白银会员",discount:98,minConsumption:1e3,pointsRatio:110,benefits:"98折优惠，积分1.1倍奖励",color:"#909399",status:1,isDefault:!1,sort:2},{id:"3",name:"黄金会员",discount:95,minConsumption:5e3,pointsRatio:120,benefits:"95折优惠，积分1.2倍奖励，生日特权",color:"#E6A23C",status:1,isDefault:!1,sort:3},{id:"4",name:"钻石会员",discount:90,minConsumption:2e4,pointsRatio:150,benefits:"9折优惠，积分1.5倍奖励，专属客服，优先配送",color:"#F56C6C",status:1,isDefault:!1,sort:4}]}},be=async()=>{try{console.log("开始获取会员统计数据...");const a=await st();if(console.log("统计数据API响应:",a),a.code===200){const e=a.data;console.log("统计数据:",e),h.value.totalMembers=e.totalMembers||0,h.value.newMembersThisMonth=e.newMembersThisMonth||0,h.value.activeMembers=e.activeMembers||0,h.value.activeRate=e.activeRate||0,h.value.totalConsumption=e.totalConsumption||0,h.value.consumptionGrowth=e.consumptionGrowth||0,h.value.avgOrderAmount=e.avgOrderAmount||0,h.value.avgOrderGrowth=e.avgOrderGrowth||0,e.levelDistribution&&(oe.value=e.levelDistribution),e.topConsumers&&(ae.value=e.topConsumers),console.log("统计数据更新成功")}else console.error("获取会员统计失败:",a.message),g.warning("获取会员统计数据失败，显示模拟数据")}catch(a){console.error("获取会员统计失败:",a),g.warning("无法连接到服务器，显示模拟数据")}},U=async()=>{te.value=!0;try{const a={pageNum:i.pageNum,pageSize:i.pageSize,name:i.name||void 0,phone:i.phone||void 0,level:i.level||void 0,status:i.status!==""?i.status:void 0},e=await ot(a);e.code===200?(M.value=e.data.list,le.value=e.data.total):g.error(e.message||"获取会员列表失败")}catch(a){console.error("获取会员列表失败:",a),g.error("获取会员列表失败"),M.value=mockMemberData.filter(e=>(!i.name||e.name.includes(i.name))&&(!i.phone||e.phone.includes(i.phone))&&(!i.level||e.level===i.level)&&(i.status===""||e.status===i.status)),le.value=M.value.length}finally{te.value=!1}},fe=()=>{i.pageNum=1,U()},we=()=>{i.name="",i.phone="",i.level="",i.status="",fe()},Ve=a=>{i.pageSize=a,U()},Ce=a=>{i.pageNum=a,U()},ke=a=>{switch(a){case"钻石会员":return"danger";case"黄金会员":return"warning";case"白银会员":return"info";case"普通会员":return"success";default:return"info"}},Fe=a=>{switch(a){case"钻石会员":return"#F56C6C";case"黄金会员":return"#E6A23C";case"白银会员":return"#909399";case"普通会员":return"#67C23A";default:return"#909399"}},Me=a=>{const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"];return e[a%e.length]},$e=()=>{ge(),se.value="添加会员",L.value=!0},De=a=>{ge(),se.value="编辑会员",Object.assign(u,a),L.value=!0},Ue=a=>{q.alert(`<div>
      <p><strong>会员编号：</strong>${a.memberNo}</p>
      <p><strong>会员姓名：</strong>${a.name}</p>
      <p><strong>手机号码：</strong>${a.phone}</p>
      <p><strong>会员等级：</strong>${a.level}</p>
      <p><strong>会员积分：</strong>${a.points}</p>
      <p><strong>账户余额：</strong>¥${a.balance.toFixed(2)}</p>
      <p><strong>累计消费：</strong>¥${a.totalConsumption.toFixed(2)}</p>
      <p><strong>注册时间：</strong>${a.createTime}</p>
      <p><strong>会员状态：</strong>${a.status===1?"正常":"冻结"}</p>
      <p><strong>会员地址：</strong>${a.address||"未设置"}</p>
      <p><strong>备注信息：</strong>${a.remark||"无"}</p>
    </div>`,`会员详情 - ${a.name}`,{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭"})},Re=a=>{q.alert(`<div class="consumption-history">
      <h3>最近消费记录</h3>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #f5f7fa;">
            <th style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">订单编号</th>
            <th style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">消费时间</th>
            <th style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">消费金额</th>
            <th style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">支付方式</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">DD20250325001</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-25 14:30:25</td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">¥128.50</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">微信支付</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">DD20250320002</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-20 10:15:36</td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">¥89.90</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">余额支付</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">DD20250315003</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-15 16:45:12</td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">¥156.30</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">支付宝</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">DD20250310004</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-10 09:20:45</td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">¥76.80</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">现金</td>
          </tr>
        </tbody>
      </table>
    </div>`,`${a.name} 的消费记录`,{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭",callback:()=>{g({type:"info",message:"您可以在销售管理中查看更多消费记录"})}})},Te=a=>{Le(),v.memberId=a.id,v.memberName=a.name,v.currentBalance=`¥${a.balance.toFixed(2)}`,j.value=!0},Ae=a=>{q.alert(`<div class="points-history">
      <h3>积分明细</h3>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #f5f7fa;">
            <th style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">时间</th>
            <th style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;">类型</th>
            <th style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">积分变动</th>
            <th style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">积分余额</th>
            <th style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">备注</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-25 14:30:25</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+128</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">${a.points}</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">购物消费奖励</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-20 10:15:36</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+90</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">${a.points-128}</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">购物消费奖励</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-15 16:45:12</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;"><span style="color: #F56C6C;">-</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;"><span style="color: #F56C6C;">-200</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">${a.points-128-90}</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">积分兑换商品</td>
          </tr>
          <tr>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">2025-03-10 09:20:45</td>
            <td style="padding: 8px; text-align: center; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;"><span style="color: #67C23A;">+150</span></td>
            <td style="padding: 8px; text-align: right; border-bottom: 1px solid #ebeef5;">${a.points-128-90+200}</td>
            <td style="padding: 8px; text-align: left; border-bottom: 1px solid #ebeef5;">购物消费奖励</td>
          </tr>
        </tbody>
      </table>
      <div style="margin-top: 15px; text-align: right;">
        <button style="padding: 8px 16px; background-color: #409EFF; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="document.querySelector('.el-message-box__close').click(); setTimeout(() => { document.querySelector('.points-adjust-btn').click(); }, 100);" class="points-adjust-btn">积分调整</button>
      </div>
    </div>`,`${a.name} 的积分明细`,{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭",callback:s=>{}});const e=document.createElement("button");e.style.display="none",e.className="points-adjust-btn",document.body.appendChild(e),e.addEventListener("click",()=>{Ne(),f.memberId=a.id,f.memberName=a.name,f.currentPoints=a.points.toString(),B.value=!0,document.body.removeChild(e)})},Ee=a=>{const e=a.status===1?"冻结":"解冻";q.confirm(`确认要${e}会员 ${a.name} 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.status=a.status===1?0:1,g.success(`${e}成功`)}).catch(()=>{})},ge=()=>{u.id="",u.memberNo="",u.name="",u.phone="",u.gender=1,u.birthday="",u.level="普通会员",u.address="",u.remark=""},Le=()=>{v.memberId="",v.memberName="",v.currentBalance="",v.amount=0,v.paymentMethod="cash",v.remark=""},Ne=()=>{f.memberId="",f.memberName="",f.currentPoints="",f.adjustType="add",f.points=0,f.reason=""},Se=async()=>{X.value&&await X.value.validate(async a=>{if(a)try{const e={...u};delete e.id;let s;u.id?s=await nt(parseInt(u.id),e):s=await at(e),s.code===200?(g.success(u.id?"修改成功":"添加成功"),L.value=!1,U()):g.error(s.message||"操作失败")}catch(e){if(console.error("操作失败:",e),g.error("操作失败"),u.id){const s=M.value.findIndex(m=>m.id===u.id);s!==-1&&Object.assign(M.value[s],u),g.success("修改成功")}else{const s={...u,id:Math.random().toString(36).substr(2,9),memberNo:"M"+new Date().getFullYear()+String(M.value.length+1).padStart(4,"0"),points:0,balance:0,totalConsumption:0,status:1,createTime:new Date().toLocaleString()};M.value.unshift(s),g.success("添加成功")}L.value=!1,U()}})},je=async()=>{Z.value&&await Z.value.validate(async a=>{if(a){const e=M.value.find(s=>s.id===v.memberId);e&&(e.balance+=v.amount),g.success(`充值成功，充值金额：¥${v.amount.toFixed(2)}`),j.value=!1,U()}})},Be=async()=>{ee.value&&await ee.value.validate(async a=>{if(a){const e=M.value.find(m=>m.id===f.memberId);e&&(f.adjustType==="add"?e.points+=f.points:e.points=Math.max(0,e.points-f.points));const s=f.adjustType==="add"?"增加":"减少";g.success(`积分调整成功，${s}积分：${f.points}`),B.value=!1,U()}})},ze=()=>{ce(),de.value="添加会员等级",N.value=!0},Oe=a=>{ce(),de.value="编辑会员等级",Object.assign(r,a),N.value=!0},Ie=async a=>{if(a.isDefault){g.warning("默认等级不能删除");return}q.confirm(`确认要删除等级 ${a.name} 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e=await ut(a.id);e.code===200?(g.success("删除成功"),G()):g.error(e.message||"删除失败")}catch(e){console.error("删除等级失败:",e);const s=F.value.findIndex(m=>m.id===a.id);s!==-1&&(F.value.splice(s,1),g.success("删除成功"))}}).catch(()=>{})},qe=async a=>{try{const e=await pt(a.id,a.status);if(e.code===200){const s=a.status===1?"启用":"禁用";g.success(`${s}成功`)}else a.status=a.status===1?0:1,g.error(e.message||"状态更新失败")}catch(e){console.error("更新等级状态失败:",e);const s=a.status===1?"启用":"禁用";g.success(`${s}成功`)}},ce=()=>{r.id="",r.name="",r.discount=100,r.minConsumption=0,r.pointsRatio=100,r.benefits="",r.color="#67C23A",r.status=1,r.sortOrder=F.value.length+1,r.isDefault=!1},Pe=async()=>{ne.value&&await ne.value.validate(async a=>{if(a)try{const e={...r};delete e.id,e.discount=parseInt(e.discount),e.minConsumption=parseFloat(e.minConsumption),e.pointsRatio=parseInt(e.pointsRatio),e.sortOrder=parseInt(e.sortOrder),e.status=parseInt(e.status),e.isDefault=!!e.isDefault,console.log("提交的数据:",e);let s;r.id?s=await it(parseInt(r.id),e):s=await rt(e),s.code===200?(g.success(r.id?"修改成功":"添加成功"),N.value=!1,G()):g.error(s.message||"操作失败")}catch(e){if(console.error("操作失败:",e),F.value.find(m=>m.name===r.name&&m.id!==r.id)){g.error("等级名称已存在");return}if(r.id){const m=F.value.findIndex(p=>p.id===r.id);m!==-1&&Object.assign(F.value[m],r),g.success("修改成功")}else{const m={...r,id:Math.random().toString(36).substr(2,9),isDefault:!1};F.value.push(m),g.success("添加成功")}F.value.sort((m,p)=>m.sort-p.sort),N.value=!1}})};return(a,e)=>{const s=x("el-button"),m=x("el-input"),p=x("el-form-item"),C=x("el-option"),Y=x("el-select"),z=x("el-form"),b=x("el-table-column"),re=x("el-tag"),H=x("el-table"),Ge=x("el-pagination"),ie=x("el-tab-pane"),Ye=x("el-switch"),O=x("el-card"),_=x("el-col"),A=x("el-row"),Q=x("el-radio-button"),I=x("el-radio-group"),He=x("el-tabs"),E=x("el-radio"),Qe=x("el-date-picker"),K=x("el-dialog"),S=x("el-input-number"),Ke=x("el-color-picker"),Je=tt("loading");return k(),$("div",mt,[t(O,{shadow:"never"},{header:l(()=>[n("div",bt,[e[43]||(e[43]=n("span",null,"会员管理",-1)),t(s,{type:"primary",onClick:$e},{default:l(()=>e[42]||(e[42]=[d("添加会员")])),_:1,__:[42]})])]),default:l(()=>[t(He,{modelValue:D.value,"onUpdate:modelValue":e[9]||(e[9]=o=>D.value=o)},{default:l(()=>[t(ie,{label:"会员列表",name:"list"},{default:l(()=>[t(z,{inline:!0,model:i,class:"search-form"},{default:l(()=>[t(p,{label:"会员姓名"},{default:l(()=>[t(m,{modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.name=o),placeholder:"请输入会员姓名",clearable:""},null,8,["modelValue"])]),_:1}),t(p,{label:"手机号"},{default:l(()=>[t(m,{modelValue:i.phone,"onUpdate:modelValue":e[1]||(e[1]=o=>i.phone=o),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),t(p,{label:"会员等级"},{default:l(()=>[t(Y,{modelValue:i.level,"onUpdate:modelValue":e[2]||(e[2]=o=>i.level=o),placeholder:"请选择会员等级",clearable:""},{default:l(()=>[t(C,{label:"普通会员",value:"普通会员"}),t(C,{label:"白银会员",value:"白银会员"}),t(C,{label:"黄金会员",value:"黄金会员"}),t(C,{label:"钻石会员",value:"钻石会员"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"状态"},{default:l(()=>[t(Y,{modelValue:i.status,"onUpdate:modelValue":e[3]||(e[3]=o=>i.status=o),placeholder:"请选择状态",clearable:""},{default:l(()=>[t(C,{label:"正常",value:1}),t(C,{label:"冻结",value:0})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(s,{type:"primary",onClick:fe},{default:l(()=>e[44]||(e[44]=[d("查询")])),_:1,__:[44]}),t(s,{onClick:we},{default:l(()=>e[45]||(e[45]=[d("重置")])),_:1,__:[45]})]),_:1})]),_:1},8,["model"]),et((k(),ue(H,{data:M.value,border:"",style:{width:"100%"}},{default:l(()=>[t(b,{type:"index",width:"50",label:"#"}),t(b,{prop:"memberNo",label:"会员编号",width:"120"}),t(b,{prop:"name",label:"会员姓名",width:"100"}),t(b,{prop:"phone",label:"手机号",width:"130"}),t(b,{prop:"gender",label:"性别",width:"80"},{default:l(o=>[d(c(o.row.gender===1?"男":"女"),1)]),_:1}),t(b,{prop:"level",label:"会员等级",width:"100"},{default:l(o=>[t(re,{type:ke(o.row.level)},{default:l(()=>[d(c(o.row.level),1)]),_:2},1032,["type"])]),_:1}),t(b,{prop:"points",label:"积分",width:"80"}),t(b,{prop:"balance",label:"余额",width:"100"},{default:l(o=>[d(" ¥"+c((o.row.balance||0).toFixed(2)),1)]),_:1}),t(b,{prop:"totalConsumption",label:"累计消费",width:"120"},{default:l(o=>[d(" ¥"+c((o.row.totalConsumption||0).toFixed(2)),1)]),_:1}),t(b,{prop:"status",label:"状态",width:"80"},{default:l(o=>[t(re,{type:o.row.status===1?"success":"danger"},{default:l(()=>[d(c(o.row.status===1?"正常":"冻结"),1)]),_:2},1032,["type"])]),_:1}),t(b,{prop:"createTime",label:"注册时间",width:"180"}),t(b,{label:"操作",width:"200",fixed:"right"},{default:l(o=>[n("div",ft,[t(s,{link:"",type:"primary",onClick:w=>De(o.row)},{default:l(()=>e[46]||(e[46]=[d("编辑")])),_:2,__:[46]},1032,["onClick"]),t(s,{link:"",type:"warning",onClick:w=>Te(o.row)},{default:l(()=>e[47]||(e[47]=[d("充值")])),_:2,__:[47]},1032,["onClick"]),t(s,{link:"",type:o.row.status===1?"danger":"success",onClick:w=>Ee(o.row)},{default:l(()=>[d(c(o.row.status===1?"冻结":"解冻"),1)]),_:2},1032,["type","onClick"])]),n("div",gt,[t(s,{link:"",type:"info",onClick:w=>Ae(o.row)},{default:l(()=>e[48]||(e[48]=[d("积分")])),_:2,__:[48]},1032,["onClick"]),t(s,{link:"",type:"success",onClick:w=>Re(o.row)},{default:l(()=>e[49]||(e[49]=[d("消费")])),_:2,__:[49]},1032,["onClick"]),t(s,{link:"",type:"primary",onClick:w=>Ue(o.row)},{default:l(()=>e[50]||(e[50]=[d("详情")])),_:2,__:[50]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Je,te.value]]),n("div",ct,[t(Ge,{"current-page":i.pageNum,"onUpdate:currentPage":e[4]||(e[4]=o=>i.pageNum=o),"page-size":i.pageSize,"onUpdate:pageSize":e[5]||(e[5]=o=>i.pageSize=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:le.value,onSizeChange:Ve,onCurrentChange:Ce},null,8,["current-page","page-size","total"])])]),_:1}),t(ie,{label:"等级设置",name:"levels"},{default:l(()=>[t(O,{shadow:"never"},{header:l(()=>[n("div",vt,[e[52]||(e[52]=n("span",null,"会员等级管理",-1)),t(s,{type:"primary",onClick:ze},{default:l(()=>e[51]||(e[51]=[d("添加等级")])),_:1,__:[51]})])]),default:l(()=>[t(H,{data:F.value,border:"",style:{width:"100%"}},{default:l(()=>[t(b,{type:"index",width:"50",label:"#"}),t(b,{prop:"name",label:"等级名称",width:"120"}),t(b,{prop:"discount",label:"折扣率",width:"100"},{default:l(o=>[d(c(o.row.discount)+"% ",1)]),_:1}),t(b,{prop:"minConsumption",label:"升级条件(累计消费)",width:"150"},{default:l(o=>[d(" ¥"+c(o.row.minConsumption.toFixed(2)),1)]),_:1}),t(b,{prop:"pointsRatio",label:"积分比例",width:"120"},{default:l(o=>[d(c(o.row.pointsRatio)+":1 ",1)]),_:1}),t(b,{prop:"benefits",label:"会员权益","min-width":"200"}),t(b,{prop:"color",label:"标签颜色",width:"100"},{default:l(o=>[t(re,{color:o.row.color,style:{color:"white"}},{default:l(()=>[d(c(o.row.name),1)]),_:2},1032,["color"])]),_:1}),t(b,{prop:"status",label:"状态",width:"80"},{default:l(o=>[t(Ye,{modelValue:o.row.status,"onUpdate:modelValue":w=>o.row.status=w,"active-value":1,"inactive-value":0,onChange:w=>qe(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(b,{label:"操作",width:"150",fixed:"right"},{default:l(o=>[t(s,{link:"",type:"primary",onClick:w=>Oe(o.row)},{default:l(()=>e[53]||(e[53]=[d("编辑")])),_:2,__:[53]},1032,["onClick"]),t(s,{link:"",type:"danger",onClick:w=>Ie(o.row),disabled:o.row.isDefault},{default:l(()=>e[54]||(e[54]=[d("删除")])),_:2,__:[54]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),t(ie,{label:"会员统计",name:"stats"},{default:l(()=>[t(A,{gutter:20},{default:l(()=>[t(_,{span:6},{default:l(()=>[n("div",xt,[e[55]||(e[55]=n("div",{class:"stat-title"},"总会员数",-1)),n("div",yt,c(h.value.totalMembers),1),n("div",_t,"较上月 +"+c(h.value.newMembersThisMonth),1)])]),_:1}),t(_,{span:6},{default:l(()=>[n("div",ht,[e[56]||(e[56]=n("div",{class:"stat-title"},"活跃会员",-1)),n("div",wt,c(h.value.activeMembers),1),n("div",Vt,"本月活跃率 "+c(h.value.activeRate)+"%",1)])]),_:1}),t(_,{span:6},{default:l(()=>[n("div",Ct,[e[57]||(e[57]=n("div",{class:"stat-title"},"会员消费总额",-1)),n("div",kt,"¥"+c(h.value.totalConsumption.toLocaleString()),1),n("div",Ft,"较上月 +"+c(h.value.consumptionGrowth)+"%",1)])]),_:1}),t(_,{span:6},{default:l(()=>[n("div",Mt,[e[58]||(e[58]=n("div",{class:"stat-title"},"平均客单价",-1)),n("div",$t,"¥"+c((h.value.avgOrderAmount||0).toFixed(2)),1),n("div",Dt,"较上月 +"+c(h.value.avgOrderGrowth)+"%",1)])]),_:1})]),_:1}),t(A,{gutter:20,style:{"margin-top":"20px"}},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(O,{shadow:"never"},{header:l(()=>[n("div",Ut,[e[61]||(e[61]=n("span",null,"会员等级分布",-1)),t(I,{modelValue:J.value,"onUpdate:modelValue":e[6]||(e[6]=o=>J.value=o),size:"small"},{default:l(()=>[t(Q,{value:"chart"},{default:l(()=>e[59]||(e[59]=[d("图表")])),_:1,__:[59]}),t(Q,{value:"table"},{default:l(()=>e[60]||(e[60]=[d("表格")])),_:1,__:[60]})]),_:1},8,["modelValue"])])]),default:l(()=>[J.value==="chart"?(k(),$("div",Rt,[n("div",Tt,[e[62]||(e[62]=n("div",{style:{width:"200px",height:"200px",position:"relative","margin-bottom":"20px"}},[n("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","border-radius":"50%",background:"conic-gradient(#67C23A 0% 54%, #909399 54% 79%, #E6A23C 79% 94%, #F56C6C 94% 100%)"}}),n("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100px",height:"100px","border-radius":"50%",background:"white",display:"flex","align-items":"center","justify-content":"center"}},[n("span",{style:{"font-size":"16px","font-weight":"bold"}},"会员分布")])],-1)),n("div",At,[(k(!0),$(pe,null,me(oe.value,o=>(k(),$("div",{key:o.level,style:{display:"flex","align-items":"center"}},[n("div",{style:ve({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:Fe(o.level),marginRight:"5px"})},null,4),n("span",null,c(o.level)+": "+c(o.percentage),1)]))),128))])])])):(k(),ue(H,{key:1,data:oe.value,style:{width:"100%"}},{default:l(()=>[t(b,{prop:"level",label:"会员等级"}),t(b,{prop:"count",label:"人数"}),t(b,{prop:"percentage",label:"占比"})]),_:1},8,["data"]))]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(O,{shadow:"never"},{header:l(()=>[n("div",Et,[e[65]||(e[65]=n("span",null,"会员消费排行",-1)),t(I,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=o=>W.value=o),size:"small"},{default:l(()=>[t(Q,{value:"chart"},{default:l(()=>e[63]||(e[63]=[d("图表")])),_:1,__:[63]}),t(Q,{value:"table"},{default:l(()=>e[64]||(e[64]=[d("表格")])),_:1,__:[64]})]),_:1},8,["modelValue"])])]),default:l(()=>[W.value==="chart"?(k(),$("div",Lt,[n("div",Nt,[(k(!0),$(pe,null,me(ae.value,(o,w)=>(k(),$("div",{key:w,style:{display:"flex","flex-direction":"column","align-items":"center",width:"60px"}},[n("div",{style:ve({height:o.consumption/6e3*200+"px",width:"40px",backgroundColor:Me(w),borderRadius:"4px 4px 0 0"})},null,4),n("div",St,[n("div",null,c(o.name),1),n("div",jt,"¥"+c((o.consumption||0).toFixed(0)),1)])]))),128))])])):(k(),ue(H,{key:1,data:ae.value,style:{width:"100%"}},{default:l(()=>[t(b,{prop:"rank",label:"排名",width:"80"}),t(b,{prop:"name",label:"会员姓名"}),t(b,{prop:"consumption",label:"消费金额",align:"right"},{default:l(o=>[d(" ¥"+c((o.row.consumption||0).toFixed(2)),1)]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1})]),_:1}),t(A,{gutter:20,style:{"margin-top":"20px"}},{default:l(()=>[t(_,{span:24},{default:l(()=>[t(O,{shadow:"never"},{header:l(()=>[n("div",Bt,[e[66]||(e[66]=n("span",null,"会员增长趋势",-1)),t(Y,{modelValue:P.value,"onUpdate:modelValue":e[8]||(e[8]=o=>P.value=o),size:"small",style:{width:"120px"}},{default:l(()=>[t(C,{label:"最近7天",value:"week"}),t(C,{label:"最近30天",value:"month"}),t(C,{label:"最近90天",value:"quarter"})]),_:1},8,["modelValue"])])]),default:l(()=>[n("div",zt,[n("div",Ot,[n("div",It,[(k(),$("svg",qt,e[67]||(e[67]=[n("polyline",{points:"40,180 120,150 200,160 280,120 360,100 440,80 520,60",style:{fill:"none",stroke:"#409EFF","stroke-width":"2"}},null,-1),n("polyline",{points:"40,200 120,190 200,180 280,170 360,160 440,150 520,140",style:{fill:"none",stroke:"#67C23A","stroke-width":"2"}},null,-1),n("circle",{cx:"40",cy:"180",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"120",cy:"150",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"200",cy:"160",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"280",cy:"120",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"360",cy:"100",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"440",cy:"80",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"520",cy:"60",r:"4",fill:"#409EFF"},null,-1),n("circle",{cx:"40",cy:"200",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"120",cy:"190",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"200",cy:"180",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"280",cy:"170",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"360",cy:"160",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"440",cy:"150",r:"4",fill:"#67C23A"},null,-1),n("circle",{cx:"520",cy:"140",r:"4",fill:"#67C23A"},null,-1)]))),e[68]||(e[68]=n("div",{style:{position:"absolute",top:"0",left:"-40px",height:"100%",display:"flex","flex-direction":"column","justify-content":"space-between"}},[n("div",null,"200"),n("div",null,"150"),n("div",null,"100"),n("div",null,"50"),n("div",null,"0")],-1))]),n("div",Pt,[(k(!0),$(pe,null,me(P.value==="week"?["周一","周二","周三","周四","周五","周六","周日"]:P.value==="month"?["第1周","第2周","第3周","第4周","第5周","第6周","第7周"]:["1月","2月","3月","4月","5月","6月","7月"],(o,w)=>(k(),$("div",{key:w,style:{flex:"1","text-align":"center",color:"#606266","font-size":"12px"}},c(o),1))),128))]),e[69]||(e[69]=n("div",{style:{display:"flex","justify-content":"center","margin-top":"10px",gap:"20px"}},[n("div",{style:{display:"flex","align-items":"center"}},[n("div",{style:{width:"12px",height:"12px","background-color":"#409EFF","margin-right":"5px"}}),n("span",null,"新增会员")]),n("div",{style:{display:"flex","align-items":"center"}},[n("div",{style:{width:"12px",height:"12px","background-color":"#67C23A","margin-right":"5px"}}),n("span",null,"活跃会员")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(K,{title:se.value,modelValue:L.value,"onUpdate:modelValue":e[18]||(e[18]=o=>L.value=o),width:"600px","append-to-body":""},{footer:l(()=>[n("div",Gt,[t(s,{onClick:e[17]||(e[17]=o=>L.value=!1)},{default:l(()=>e[72]||(e[72]=[d("取消")])),_:1,__:[72]}),t(s,{type:"primary",onClick:Se},{default:l(()=>e[73]||(e[73]=[d("确定")])),_:1,__:[73]})])]),default:l(()=>[t(z,{ref_key:"memberFormRef",ref:X,model:u,rules:xe,"label-width":"100px"},{default:l(()=>[t(A,{gutter:20},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(p,{label:"会员姓名",prop:"name"},{default:l(()=>[t(m,{modelValue:u.name,"onUpdate:modelValue":e[10]||(e[10]=o=>u.name=o),placeholder:"请输入会员姓名"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(p,{label:"手机号",prop:"phone"},{default:l(()=>[t(m,{modelValue:u.phone,"onUpdate:modelValue":e[11]||(e[11]=o=>u.phone=o),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:20},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(p,{label:"性别",prop:"gender"},{default:l(()=>[t(I,{modelValue:u.gender,"onUpdate:modelValue":e[12]||(e[12]=o=>u.gender=o)},{default:l(()=>[t(E,{value:1},{default:l(()=>e[70]||(e[70]=[d("男")])),_:1,__:[70]}),t(E,{value:0},{default:l(()=>e[71]||(e[71]=[d("女")])),_:1,__:[71]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(p,{label:"生日",prop:"birthday"},{default:l(()=>[t(Qe,{modelValue:u.birthday,"onUpdate:modelValue":e[13]||(e[13]=o=>u.birthday=o),type:"date",placeholder:"请选择生日",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(p,{label:"会员等级",prop:"level"},{default:l(()=>[t(Y,{modelValue:u.level,"onUpdate:modelValue":e[14]||(e[14]=o=>u.level=o),placeholder:"请选择会员等级",style:{width:"100%"}},{default:l(()=>[t(C,{label:"普通会员",value:"普通会员"}),t(C,{label:"白银会员",value:"白银会员"}),t(C,{label:"黄金会员",value:"黄金会员"}),t(C,{label:"钻石会员",value:"钻石会员"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"地址",prop:"address"},{default:l(()=>[t(m,{modelValue:u.address,"onUpdate:modelValue":e[15]||(e[15]=o=>u.address=o),type:"textarea",rows:3,placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),t(p,{label:"备注",prop:"remark"},{default:l(()=>[t(m,{modelValue:u.remark,"onUpdate:modelValue":e[16]||(e[16]=o=>u.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(K,{title:"会员充值",modelValue:j.value,"onUpdate:modelValue":e[25]||(e[25]=o=>j.value=o),width:"400px","append-to-body":""},{footer:l(()=>[n("div",Yt,[t(s,{onClick:e[24]||(e[24]=o=>j.value=!1)},{default:l(()=>e[78]||(e[78]=[d("取消")])),_:1,__:[78]}),t(s,{type:"primary",onClick:je},{default:l(()=>e[79]||(e[79]=[d("确定充值")])),_:1,__:[79]})])]),default:l(()=>[t(z,{ref_key:"rechargeFormRef",ref:Z,model:v,rules:ye,"label-width":"100px"},{default:l(()=>[t(p,{label:"会员姓名"},{default:l(()=>[t(m,{modelValue:v.memberName,"onUpdate:modelValue":e[19]||(e[19]=o=>v.memberName=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"当前余额"},{default:l(()=>[t(m,{modelValue:v.currentBalance,"onUpdate:modelValue":e[20]||(e[20]=o=>v.currentBalance=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"充值金额",prop:"amount"},{default:l(()=>[t(S,{modelValue:v.amount,"onUpdate:modelValue":e[21]||(e[21]=o=>v.amount=o),min:.01,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(p,{label:"支付方式",prop:"paymentMethod"},{default:l(()=>[t(I,{modelValue:v.paymentMethod,"onUpdate:modelValue":e[22]||(e[22]=o=>v.paymentMethod=o)},{default:l(()=>[t(E,{value:"cash"},{default:l(()=>e[74]||(e[74]=[d("现金")])),_:1,__:[74]}),t(E,{value:"wechat"},{default:l(()=>e[75]||(e[75]=[d("微信")])),_:1,__:[75]}),t(E,{value:"alipay"},{default:l(()=>e[76]||(e[76]=[d("支付宝")])),_:1,__:[76]}),t(E,{value:"card"},{default:l(()=>e[77]||(e[77]=[d("银行卡")])),_:1,__:[77]})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"备注",prop:"remark"},{default:l(()=>[t(m,{modelValue:v.remark,"onUpdate:modelValue":e[23]||(e[23]=o=>v.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(K,{title:"积分调整",modelValue:B.value,"onUpdate:modelValue":e[32]||(e[32]=o=>B.value=o),width:"400px","append-to-body":""},{footer:l(()=>[n("div",Ht,[t(s,{onClick:e[31]||(e[31]=o=>B.value=!1)},{default:l(()=>e[82]||(e[82]=[d("取消")])),_:1,__:[82]}),t(s,{type:"primary",onClick:Be},{default:l(()=>e[83]||(e[83]=[d("确定调整")])),_:1,__:[83]})])]),default:l(()=>[t(z,{ref_key:"pointsFormRef",ref:ee,model:f,rules:_e,"label-width":"100px"},{default:l(()=>[t(p,{label:"会员姓名"},{default:l(()=>[t(m,{modelValue:f.memberName,"onUpdate:modelValue":e[26]||(e[26]=o=>f.memberName=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"当前积分"},{default:l(()=>[t(m,{modelValue:f.currentPoints,"onUpdate:modelValue":e[27]||(e[27]=o=>f.currentPoints=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"调整类型",prop:"adjustType"},{default:l(()=>[t(I,{modelValue:f.adjustType,"onUpdate:modelValue":e[28]||(e[28]=o=>f.adjustType=o)},{default:l(()=>[t(E,{value:"add"},{default:l(()=>e[80]||(e[80]=[d("增加")])),_:1,__:[80]}),t(E,{value:"subtract"},{default:l(()=>e[81]||(e[81]=[d("减少")])),_:1,__:[81]})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"调整积分",prop:"points"},{default:l(()=>[t(S,{modelValue:f.points,"onUpdate:modelValue":e[29]||(e[29]=o=>f.points=o),min:1,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(p,{label:"调整原因",prop:"reason"},{default:l(()=>[t(m,{modelValue:f.reason,"onUpdate:modelValue":e[30]||(e[30]=o=>f.reason=o),type:"textarea",rows:3,placeholder:"请输入调整原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(K,{title:de.value,modelValue:N.value,"onUpdate:modelValue":e[41]||(e[41]=o=>N.value=o),width:"600px","append-to-body":""},{footer:l(()=>[n("div",Qt,[t(s,{onClick:e[40]||(e[40]=o=>N.value=!1)},{default:l(()=>e[84]||(e[84]=[d("取消")])),_:1,__:[84]}),t(s,{type:"primary",onClick:Pe},{default:l(()=>e[85]||(e[85]=[d("确定")])),_:1,__:[85]})])]),default:l(()=>[t(z,{ref_key:"levelFormRef",ref:ne,model:r,rules:he,"label-width":"120px"},{default:l(()=>[t(A,{gutter:20},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(p,{label:"等级名称",prop:"name"},{default:l(()=>[t(m,{modelValue:r.name,"onUpdate:modelValue":e[33]||(e[33]=o=>r.name=o),placeholder:"请输入等级名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(p,{label:"折扣率(%)",prop:"discount"},{default:l(()=>[t(S,{modelValue:r.discount,"onUpdate:modelValue":e[34]||(e[34]=o=>r.discount=o),min:50,max:100,precision:0,style:{width:"100%"},placeholder:"100表示无折扣"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:20},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(p,{label:"升级条件(元)",prop:"minConsumption"},{default:l(()=>[t(S,{modelValue:r.minConsumption,"onUpdate:modelValue":e[35]||(e[35]=o=>r.minConsumption=o),min:0,precision:2,style:{width:"100%"},placeholder:"累计消费金额"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(p,{label:"积分比例",prop:"pointsRatio"},{default:l(()=>[t(S,{modelValue:r.pointsRatio,"onUpdate:modelValue":e[36]||(e[36]=o=>r.pointsRatio=o),min:100,max:200,precision:0,style:{width:"100%"},placeholder:"100表示1:1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{gutter:20},{default:l(()=>[t(_,{span:12},{default:l(()=>[t(p,{label:"标签颜色",prop:"color"},{default:l(()=>[t(Ke,{modelValue:r.color,"onUpdate:modelValue":e[37]||(e[37]=o=>r.color=o)},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:12},{default:l(()=>[t(p,{label:"排序",prop:"sortOrder"},{default:l(()=>[t(S,{modelValue:r.sortOrder,"onUpdate:modelValue":e[38]||(e[38]=o=>r.sortOrder=o),min:1,max:99,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(p,{label:"会员权益",prop:"benefits"},{default:l(()=>[t(m,{modelValue:r.benefits,"onUpdate:modelValue":e[39]||(e[39]=o=>r.benefits=o),type:"textarea",rows:3,placeholder:"请输入会员权益描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Xt=lt(Kt,[["__scopeId","data-v-a94da999"]]);export{Xt as default};
