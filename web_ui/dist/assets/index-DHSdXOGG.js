import{d as Fe,a as $,r as V,k as $e,c as h,e as t,w as l,g as m,E as i,o as y,b as f,O as ze,K as le,L as oe,h as s,P as Re,D as Y,y as v,l as A,z as Me,Q as je,R as Oe,S as ae,T as Ke,U as G,A as re,u as qe,_ as He}from"./index-DhDhwFZx.js";import{s as S}from"./request-Bb0hX5IM.js";function Qe(_){return S({url:"/supplier/list",method:"get",params:_})}function Ye(_){return S({url:`/supplier/${_}`,method:"get"})}function Ge(_){return S({url:"/supplier",method:"post",data:_})}function Je(_,u){return S({url:`/supplier/${_}`,method:"put",data:u})}function We(_){return S({url:`/supplier/${_}`,method:"delete"})}function Xe(_,u){return S({url:`/supplier/${_}/status`,method:"put",data:{status:u}})}function Ze(){return S({url:"/supplier/categories",method:"get"})}function et(_){return S({url:"/supplier/batch-import",method:"post",data:_})}function tt(_){return S({url:"/supplier/export",method:"get",params:_,responseType:"blob"})}const lt={class:"supplier-container"},ot={class:"card-header"},at={class:"header-buttons"},rt={class:"search-section"},nt={key:0},st={key:1},ut={class:"operation-buttons"},dt={class:"pagination-section"},it={key:0,class:"supplier-detail"},pt={key:0},ct={key:1},mt={class:"dialog-footer"},ft={class:"batch-import-content"},_t={class:"template-download",style:{"margin-bottom":"20px"}},gt={key:0,class:"import-result",style:{"margin-top":"20px"}},vt={key:0},bt={style:{color:"#f56c6c","font-size":"12px"}},yt={class:"dialog-footer"},Ct=Fe({__name:"index",setup(_){const u=$({supplierCode:"",supplierName:"",contactPerson:"",category:"",status:""}),C=$({currentPage:1,pageSize:20,total:0}),z=V(!1),I=V(!1),B=V(!1),E=V("add"),g=V(null),N=V(),p=$({id:null,supplierCode:"",supplierName:"",contactPerson:"",contactPhone:"",email:"",address:"",category:"",status:"ACTIVE",creditLimit:null,remark:""}),ne=$({supplierName:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),J=V([]),R=V(!1),M=V([]),j=V(),U=V(null),x=V(null),P=async()=>{R.value=!0;try{const o={page:C.currentPage,limit:C.pageSize,supplierCode:u.supplierCode||void 0,supplierName:u.supplierName||void 0,contactPerson:u.contactPerson||void 0,category:u.category||void 0,status:u.status||void 0},e=await Qe(o);e.code===200?(J.value=e.data.items,C.total=e.data.total):i.error(e.message||"获取供应商列表失败")}catch(o){console.error("获取供应商列表失败:",o),i.error("获取供应商列表失败")}finally{R.value=!1}},O=async()=>{try{const o=await Ze();o.code===200&&(M.value=o.data)}catch(o){console.error("获取分类列表失败:",o)}},W=()=>{C.currentPage=1,P()},se=()=>{u.supplierCode="",u.supplierName="",u.contactPerson="",u.category="",u.status="",W()},ue=o=>{C.pageSize=o,C.currentPage=1,P()},de=o=>{C.currentPage=o,P()},ie=async o=>{try{const e=await Ye(o.id);e.code===200?(g.value=e.data,z.value=!0):i.error(e.message||"获取供应商详情失败")}catch(e){console.error("获取供应商详情失败:",e),i.error("获取供应商详情失败")}},pe=()=>{E.value="add",K(),I.value=!0},ce=o=>{E.value="edit",K(),Object.assign(p,{id:o.id,supplierCode:o.supplierCode,supplierName:o.supplierName,contactPerson:o.contactPerson,contactPhone:o.contactPhone,email:o.email,address:o.address,category:o.category,status:o.status,creditLimit:o.creditLimit,remark:o.remark}),I.value=!0},K=()=>{N.value&&N.value.resetFields(),Object.assign(p,{id:null,supplierCode:"",supplierName:"",contactPerson:"",contactPhone:"",email:"",address:"",category:"",status:"ACTIVE",creditLimit:null,remark:""})},me=async()=>{N.value&&await N.value.validate(async o=>{if(o)try{const e={...p};delete e.id;let n;E.value==="add"?n=await Ge(e):n=await Je(p.id,e),n.code===200?(i.success(E.value==="add"?"新增供应商成功":"更新供应商成功"),I.value=!1,P(),O()):i.error(n.message||"操作失败")}catch(e){console.error("操作失败:",e),i.error("操作失败")}})},fe=async o=>{try{await re.confirm(`确定要删除供应商 "${o.supplierName}" 吗？此操作不可撤销。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await We(o.id);e.code===200?(i.success("删除供应商成功"),P()):i.error(e.message||"删除供应商失败")}catch(e){e!=="cancel"&&(console.error("删除供应商失败:",e),i.error("删除供应商失败"))}},_e=async(o,e)=>{try{const n={ACTIVE:"启用",INACTIVE:"停用",BLACKLIST:"加入黑名单"}[e];await re.confirm(`确定要${n}供应商 "${o.supplierName}" 吗？`,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const r=await Xe(o.id,e);r.code===200?(i.success(`${n}成功`),P()):i.error(r.message||"操作失败")}catch(n){n!=="cancel"&&(console.error("更新状态失败:",n),i.error("更新状态失败"))}},ge=()=>{B.value=!0},ve=qe(),be=()=>{ve.push("/dashboard/supplier-category")},ye=async()=>{try{i.info("正在导出数据，请稍候...");const o={supplierCode:u.supplierCode||void 0,supplierName:u.supplierName||void 0,contactPerson:u.contactPerson||void 0,category:u.category||void 0,status:u.status||void 0};console.log("导出参数:",o);const e=await tt(o);if(console.log("导出响应:",e),console.log("响应类型:",typeof e),console.log("是否为Blob:",e instanceof Blob),console.log("文件大小:",e instanceof Blob?e.size:"N/A"),console.log("内容类型:",e instanceof Blob?e.type:"N/A"),e instanceof Blob&&e.size>0){const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n;const c=new Date,d=c.getFullYear()+String(c.getMonth()+1).padStart(2,"0")+String(c.getDate()).padStart(2,"0")+"_"+String(c.getHours()).padStart(2,"0")+String(c.getMinutes()).padStart(2,"0")+String(c.getSeconds()).padStart(2,"0");r.download=`供应商数据_${d}.xlsx`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),i.success("数据导出成功")}else console.error("后端响应不是有效的Blob或文件为空"),i.error("导出失败：服务器返回的数据格式不正确")}catch(o){console.error("导出失败:",o);let e="导出失败";o.response?o.response.status===404?e="导出接口不存在，请检查后端服务":o.response.status===500?e="服务器内部错误，请检查后端日志":e=`导出失败: HTTP ${o.response.status}`:o.message&&(e=`导出失败: ${o.message}`),i.error(e)}},X=o=>({ACTIVE:"success",INACTIVE:"warning",BLACKLIST:"danger"})[o]||"info",q=o=>o?new Date(o).toLocaleString("zh-CN"):"-",Ce=()=>{U.value=null,x.value=null,j.value&&j.value.clearFiles()},we=o=>{U.value=o.raw,x.value=null},Ve=()=>{i.warning("只能上传一个文件")},ke=()=>{const e=[["供应商编码","供应商名称","联系人","联系电话","邮箱","地址","分类","状态","信用额度","备注"],["","示例供应商","张三","13800138000","example@test.com","北京市朝阳区","生鲜","ACTIVE","50000","这是示例数据"],["","","","","","","","","",""]].map(b=>b.map(L=>`"${L}"`).join(",")).join(`
`),n="\uFEFF",r=new Blob([n+e],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(r),d=document.createElement("a");d.href=c,d.download="供应商导入模板.csv",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),i.success("模板下载成功")},he=async()=>{if(!U.value){i.error("请选择要导入的文件");return}try{i.info("正在解析文件，请稍候...");const o=await xe(U.value);if(!o||o.length===0){i.error("文件内容为空或格式不正确");return}const e=Se(o);if(e.length===0){i.error("没有找到有效的供应商数据");return}i.info(`准备导入 ${e.length} 条供应商数据...`);const n=await et(e);n.code===200?(x.value=n.data,i.success("批量导入完成"),n.data.successCount>0&&(P(),O())):i.error(n.message||"批量导入失败")}catch(o){console.error("批量导入失败:",o),i.error("批量导入失败："+o.message)}},xe=o=>new Promise((e,n)=>{const r=new FileReader;r.onload=c=>{var d;try{const b=new Uint8Array((d=c.target)==null?void 0:d.result);e([["供应商编码","供应商名称","联系人","联系电话","邮箱","地址","分类","状态","信用额度","备注"],["","测试供应商1","张三","13800138001","test1@example.com","北京市朝阳区","生鲜","ACTIVE","50000","测试数据1"],["","测试供应商2","李四","13800138002","test2@example.com","上海市浦东区","肉类","ACTIVE","80000","测试数据2"]])}catch{n(new Error("文件解析失败"))}},r.onerror=()=>{n(new Error("文件读取失败"))},r.readAsArrayBuffer(o)}),Se=o=>{if(!o||o.length<2)return[];const e=[];for(let n=1;n<o.length;n++){const r=o[n];if(!r[1]||!r[2]||!r[3])continue;const c={supplierCode:r[0]||"",supplierName:r[1]||"",contactPerson:r[2]||"",contactPhone:r[3]||"",email:r[4]||"",address:r[5]||"",category:r[6]||"",status:r[7]||"ACTIVE",creditLimit:parseFloat(r[8])||0,remark:r[9]||""};e.push(c)}return e};return $e(()=>{P(),O()}),(o,e)=>{const n=m("el-icon"),r=m("el-button"),c=m("el-input"),d=m("el-form-item"),b=m("el-option"),L=m("el-select"),Z=m("el-form"),k=m("el-table-column"),ee=m("el-tag"),H=m("el-dropdown-item"),Pe=m("el-dropdown-menu"),Te=m("el-dropdown"),Le=m("el-table"),Ie=m("el-pagination"),Ae=m("el-card"),w=m("el-descriptions-item"),Ee=m("el-descriptions"),Q=m("el-dialog"),T=m("el-col"),D=m("el-row"),Ne=m("el-input-number"),te=m("el-alert"),Ue=m("upload-filled"),Be=m("el-upload"),De=Re("loading");return y(),h("div",lt,[t(Ae,{shadow:"never"},{header:l(()=>[f("div",ot,[e[26]||(e[26]=f("span",null,"供应商管理",-1)),f("div",at,[t(r,{type:"primary",onClick:pe},{default:l(()=>[t(n,null,{default:l(()=>[t(A(je))]),_:1}),e[22]||(e[22]=s(" 新增供应商 "))]),_:1,__:[22]}),t(r,{type:"success",onClick:ge},{default:l(()=>[t(n,null,{default:l(()=>[t(A(Oe))]),_:1}),e[23]||(e[23]=s(" 批量导入 "))]),_:1,__:[23]}),t(r,{type:"info",onClick:ye},{default:l(()=>[t(n,null,{default:l(()=>[t(A(ae))]),_:1}),e[24]||(e[24]=s(" 导出数据 "))]),_:1,__:[24]}),t(r,{type:"warning",onClick:be},{default:l(()=>[t(n,null,{default:l(()=>[t(A(Ke))]),_:1}),e[25]||(e[25]=s(" 分类管理 "))]),_:1,__:[25]})])])]),default:l(()=>[f("div",rt,[t(Z,{model:u,inline:""},{default:l(()=>[t(d,{label:"供应商编码"},{default:l(()=>[t(c,{modelValue:u.supplierCode,"onUpdate:modelValue":e[0]||(e[0]=a=>u.supplierCode=a),placeholder:"请输入供应商编码",clearable:""},null,8,["modelValue"])]),_:1}),t(d,{label:"供应商名称"},{default:l(()=>[t(c,{modelValue:u.supplierName,"onUpdate:modelValue":e[1]||(e[1]=a=>u.supplierName=a),placeholder:"请输入供应商名称",clearable:""},null,8,["modelValue"])]),_:1}),t(d,{label:"联系人"},{default:l(()=>[t(c,{modelValue:u.contactPerson,"onUpdate:modelValue":e[2]||(e[2]=a=>u.contactPerson=a),placeholder:"请输入联系人",clearable:""},null,8,["modelValue"])]),_:1}),t(d,{label:"分类"},{default:l(()=>[t(L,{modelValue:u.category,"onUpdate:modelValue":e[3]||(e[3]=a=>u.category=a),placeholder:"请选择分类",clearable:""},{default:l(()=>[t(b,{label:"全部",value:""}),(y(!0),h(le,null,oe(M.value,a=>(y(),Y(b,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"状态"},{default:l(()=>[t(L,{modelValue:u.status,"onUpdate:modelValue":e[4]||(e[4]=a=>u.status=a),placeholder:"请选择状态",clearable:""},{default:l(()=>[t(b,{label:"全部",value:""}),t(b,{label:"正常",value:"ACTIVE"}),t(b,{label:"停用",value:"INACTIVE"}),t(b,{label:"黑名单",value:"BLACKLIST"})]),_:1},8,["modelValue"])]),_:1}),t(d,null,{default:l(()=>[t(r,{type:"primary",onClick:W},{default:l(()=>e[27]||(e[27]=[s("查询")])),_:1,__:[27]}),t(r,{onClick:se},{default:l(()=>e[28]||(e[28]=[s("重置")])),_:1,__:[28]})]),_:1})]),_:1},8,["model"])]),ze((y(),Y(Le,{data:J.value,border:"",style:{width:"100%"}},{default:l(()=>[t(k,{prop:"supplierCode",label:"供应商编码",width:"120"}),t(k,{prop:"supplierName",label:"供应商名称","min-width":"150"}),t(k,{prop:"contactPerson",label:"联系人",width:"100"}),t(k,{prop:"contactPhone",label:"联系电话",width:"120"}),t(k,{prop:"email",label:"邮箱",width:"150"}),t(k,{prop:"category",label:"分类",width:"100"}),t(k,{prop:"address",label:"地址","min-width":"150","show-overflow-tooltip":""}),t(k,{prop:"creditLimit",label:"信用额度",width:"100"},{default:l(a=>[a.row.creditLimit?(y(),h("span",nt,"¥"+v(a.row.creditLimit.toFixed(2)),1)):(y(),h("span",st,"-"))]),_:1}),t(k,{prop:"status",label:"状态",width:"80"},{default:l(a=>[t(ee,{type:X(a.row.status),size:"small"},{default:l(()=>[s(v(a.row.statusText),1)]),_:2},1032,["type"])]),_:1}),t(k,{prop:"createdAt",label:"创建时间",width:"150"},{default:l(a=>[s(v(q(a.row.createdAt)),1)]),_:1}),t(k,{label:"操作",width:"200",fixed:"right"},{default:l(a=>[f("div",ut,[t(r,{type:"primary",link:"",onClick:F=>ie(a.row)},{default:l(()=>e[29]||(e[29]=[s("详情")])),_:2,__:[29]},1032,["onClick"]),t(r,{type:"warning",link:"",onClick:F=>ce(a.row)},{default:l(()=>e[30]||(e[30]=[s("编辑")])),_:2,__:[30]},1032,["onClick"]),t(Te,{onCommand:F=>_e(a.row,F)},{dropdown:l(()=>[t(Pe,null,{default:l(()=>[t(H,{command:"ACTIVE",disabled:a.row.status==="ACTIVE"},{default:l(()=>e[32]||(e[32]=[s(" 启用 ")])),_:2,__:[32]},1032,["disabled"]),t(H,{command:"INACTIVE",disabled:a.row.status==="INACTIVE"},{default:l(()=>e[33]||(e[33]=[s(" 停用 ")])),_:2,__:[33]},1032,["disabled"]),t(H,{command:"BLACKLIST",disabled:a.row.status==="BLACKLIST"},{default:l(()=>e[34]||(e[34]=[s(" 加入黑名单 ")])),_:2,__:[34]},1032,["disabled"])]),_:2},1024)]),default:l(()=>[t(r,{type:"info",link:""},{default:l(()=>[e[31]||(e[31]=s(" 状态")),t(n,{class:"el-icon--right"},{default:l(()=>[t(A(Me))]),_:1})]),_:1,__:[31]})]),_:2},1032,["onCommand"]),t(r,{type:"danger",link:"",onClick:F=>fe(a.row)},{default:l(()=>e[35]||(e[35]=[s("删除")])),_:2,__:[35]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[De,R.value]]),f("div",dt,[t(Ie,{"current-page":C.currentPage,"onUpdate:currentPage":e[5]||(e[5]=a=>C.currentPage=a),"page-size":C.pageSize,"onUpdate:pageSize":e[6]||(e[6]=a=>C.pageSize=a),"page-sizes":[10,20,50,100],total:C.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ue,onCurrentChange:de},null,8,["current-page","page-size","total"])])]),_:1}),t(Q,{title:"供应商详情",modelValue:z.value,"onUpdate:modelValue":e[7]||(e[7]=a=>z.value=a),width:"800px"},{default:l(()=>[g.value?(y(),h("div",it,[t(Ee,{column:2,border:""},{default:l(()=>[t(w,{label:"供应商编码"},{default:l(()=>[s(v(g.value.supplierCode),1)]),_:1}),t(w,{label:"供应商名称"},{default:l(()=>[s(v(g.value.supplierName),1)]),_:1}),t(w,{label:"联系人"},{default:l(()=>[s(v(g.value.contactPerson||"-"),1)]),_:1}),t(w,{label:"联系电话"},{default:l(()=>[s(v(g.value.contactPhone||"-"),1)]),_:1}),t(w,{label:"邮箱"},{default:l(()=>[s(v(g.value.email||"-"),1)]),_:1}),t(w,{label:"分类"},{default:l(()=>[s(v(g.value.category||"-"),1)]),_:1}),t(w,{label:"地址",span:2},{default:l(()=>[s(v(g.value.address||"-"),1)]),_:1}),t(w,{label:"信用额度"},{default:l(()=>[g.value.creditLimit?(y(),h("span",pt,"¥"+v(g.value.creditLimit.toFixed(2)),1)):(y(),h("span",ct,"-"))]),_:1}),t(w,{label:"状态"},{default:l(()=>[t(ee,{type:X(g.value.status),size:"small"},{default:l(()=>[s(v(g.value.statusText),1)]),_:1},8,["type"])]),_:1}),t(w,{label:"创建时间"},{default:l(()=>[s(v(q(g.value.createdAt)),1)]),_:1}),t(w,{label:"更新时间"},{default:l(()=>[s(v(q(g.value.updatedAt)),1)]),_:1}),t(w,{label:"备注",span:2},{default:l(()=>[s(v(g.value.remark||"-"),1)]),_:1})]),_:1})])):G("",!0)]),_:1},8,["modelValue"]),t(Q,{title:E.value==="add"?"新增供应商":"编辑供应商",modelValue:I.value,"onUpdate:modelValue":e[19]||(e[19]=a=>I.value=a),width:"800px",onClose:K},{footer:l(()=>[f("div",mt,[t(r,{onClick:e[18]||(e[18]=a=>I.value=!1)},{default:l(()=>e[36]||(e[36]=[s("取消")])),_:1,__:[36]}),t(r,{type:"primary",onClick:me},{default:l(()=>e[37]||(e[37]=[s("确定")])),_:1,__:[37]})])]),default:l(()=>[t(Z,{ref_key:"editFormRef",ref:N,model:p,rules:ne,"label-width":"100px"},{default:l(()=>[t(D,{gutter:20},{default:l(()=>[t(T,{span:12},{default:l(()=>[t(d,{label:"供应商编码",prop:"supplierCode"},{default:l(()=>[t(c,{modelValue:p.supplierCode,"onUpdate:modelValue":e[8]||(e[8]=a=>p.supplierCode=a),placeholder:"留空自动生成"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(d,{label:"供应商名称",prop:"supplierName"},{default:l(()=>[t(c,{modelValue:p.supplierName,"onUpdate:modelValue":e[9]||(e[9]=a=>p.supplierName=a),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,{gutter:20},{default:l(()=>[t(T,{span:12},{default:l(()=>[t(d,{label:"联系人",prop:"contactPerson"},{default:l(()=>[t(c,{modelValue:p.contactPerson,"onUpdate:modelValue":e[10]||(e[10]=a=>p.contactPerson=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(d,{label:"联系电话",prop:"contactPhone"},{default:l(()=>[t(c,{modelValue:p.contactPhone,"onUpdate:modelValue":e[11]||(e[11]=a=>p.contactPhone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,{gutter:20},{default:l(()=>[t(T,{span:12},{default:l(()=>[t(d,{label:"邮箱",prop:"email"},{default:l(()=>[t(c,{modelValue:p.email,"onUpdate:modelValue":e[12]||(e[12]=a=>p.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(d,{label:"分类",prop:"category"},{default:l(()=>[t(L,{modelValue:p.category,"onUpdate:modelValue":e[13]||(e[13]=a=>p.category=a),placeholder:"请选择分类",style:{width:"100%"},filterable:"","allow-create":""},{default:l(()=>[(y(!0),h(le,null,oe(M.value,a=>(y(),Y(b,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,{gutter:20},{default:l(()=>[t(T,{span:12},{default:l(()=>[t(d,{label:"状态",prop:"status"},{default:l(()=>[t(L,{modelValue:p.status,"onUpdate:modelValue":e[14]||(e[14]=a=>p.status=a),placeholder:"请选择状态",style:{width:"100%"}},{default:l(()=>[t(b,{label:"正常",value:"ACTIVE"}),t(b,{label:"停用",value:"INACTIVE"}),t(b,{label:"黑名单",value:"BLACKLIST"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(T,{span:12},{default:l(()=>[t(d,{label:"信用额度"},{default:l(()=>[t(Ne,{modelValue:p.creditLimit,"onUpdate:modelValue":e[15]||(e[15]=a=>p.creditLimit=a),min:0,precision:2,style:{width:"100%"},placeholder:"请输入信用额度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(d,{label:"地址"},{default:l(()=>[t(c,{modelValue:p.address,"onUpdate:modelValue":e[16]||(e[16]=a=>p.address=a),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),t(d,{label:"备注"},{default:l(()=>[t(c,{modelValue:p.remark,"onUpdate:modelValue":e[17]||(e[17]=a=>p.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(Q,{title:"批量导入供应商",modelValue:B.value,"onUpdate:modelValue":e[21]||(e[21]=a=>B.value=a),width:"800px",onClose:Ce},{footer:l(()=>[f("div",yt,[t(r,{onClick:e[20]||(e[20]=a=>B.value=!1)},{default:l(()=>e[43]||(e[43]=[s("取消")])),_:1,__:[43]}),t(r,{type:"primary",onClick:he,disabled:!U.value},{default:l(()=>e[44]||(e[44]=[s(" 开始导入 ")])),_:1,__:[44]},8,["disabled"])])]),default:l(()=>[f("div",ft,[t(te,{title:"导入说明",type:"info",closable:!1,style:{"margin-bottom":"20px"}},{default:l(()=>e[38]||(e[38]=[f("div",null,[f("p",null,"1. 请下载模板文件，按照模板格式填写数据"),f("p",null,"2. 支持Excel格式文件(.xlsx)"),f("p",null,"3. 必填字段：供应商名称、联系人、联系电话"),f("p",null,"4. 供应商编码留空将自动生成")],-1)])),_:1}),f("div",_t,[t(r,{type:"primary",onClick:ke},{default:l(()=>[t(n,null,{default:l(()=>[t(A(ae))]),_:1}),e[39]||(e[39]=s(" 下载导入模板 "))]),_:1,__:[39]})]),t(Be,{ref_key:"uploadRef",ref:j,class:"upload-demo",drag:"","auto-upload":!1,limit:1,"on-change":we,"on-exceed":Ve,accept:".xlsx,.xls"},{tip:l(()=>e[40]||(e[40]=[f("div",{class:"el-upload__tip"}," 只能上传Excel文件，且不超过10MB ",-1)])),default:l(()=>[t(n,{class:"el-icon--upload"},{default:l(()=>[t(Ue)]),_:1}),e[41]||(e[41]=f("div",{class:"el-upload__text"},[s(" 将文件拖到此处，或"),f("em",null,"点击上传")],-1))]),_:1,__:[41]},512),x.value?(y(),h("div",gt,[t(te,{title:`导入完成：成功 ${x.value.successCount} 条，失败 ${x.value.failCount} 条`,type:x.value.failCount>0?"warning":"success",closable:!1},{default:l(()=>[x.value.errorMessages?(y(),h("div",vt,[e[42]||(e[42]=f("p",null,"错误信息：",-1)),f("p",bt,v(x.value.errorMessages),1)])):G("",!0)]),_:1},8,["title","type"])])):G("",!0)])]),_:1},8,["modelValue"])])}}}),kt=He(Ct,[["__scopeId","data-v-ce188b89"]]);export{kt as default};
