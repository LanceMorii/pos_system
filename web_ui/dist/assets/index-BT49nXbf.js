import{d as b,r as g,a as h,c as C,b as r,e as s,w as n,f as R,g as t,o as U,u as I,h as m,E as _,_ as N}from"./index-DhDhwFZx.js";import{u as z}from"./user-c84Z4Oim.js";import"./request-Bb0hX5IM.js";const B={class:"login-container"},E={class:"login-form"},F={class:"register-link"},S=b({__name:"index",setup(T){const p=I(),v=z(),a=g(),i=g(!1),o=h({username:"admin",password:"123456"}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},c=async()=>{if(a.value)try{await a.value.validate(),i.value=!0,await new Promise(e=>setTimeout(e,1e3));const l={id:"1",username:o.username,realName:o.username==="admin"?"管理员":"收银员",role:o.username==="admin"?"admin":"cashier",avatar:""};v.setUserInfo(l),localStorage.setItem("token","mock-token-"+Date.now()),_.success("登录成功"),p.push("/dashboard/home")}catch(l){console.error("登录失败:",l),_.error("登录失败，请重试")}finally{i.value=!1}},k=()=>{p.push("/register")};return(l,e)=>{const f=t("el-input"),u=t("el-form-item"),y=t("el-button"),x=t("el-link"),V=t("el-form");return U(),C("div",B,[r("div",E,[e[5]||(e[5]=r("div",{class:"login-header"},[r("h2",null,"智慧超市系统"),r("p",null,"欢迎登录")],-1)),s(V,{ref_key:"loginFormRef",ref:a,model:o,rules:w,class:"login-form-content",onKeyup:R(c,["enter"])},{default:n(()=>[s(u,{prop:"username"},{default:n(()=>[s(f,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.username=d),placeholder:"请输入用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),s(u,{prop:"password"},{default:n(()=>[s(f,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),s(u,null,{default:n(()=>[s(y,{type:"primary",size:"large",class:"login-button",loading:i.value,onClick:c},{default:n(()=>e[2]||(e[2]=[m(" 登录 ")])),_:1,__:[2]},8,["loading"])]),_:1}),r("div",F,[e[4]||(e[4]=m(" 没有账号？")),s(x,{type:"primary",onClick:k},{default:n(()=>e[3]||(e[3]=[m("立即注册")])),_:1,__:[3]})])]),_:1},8,["model"]),e[6]||(e[6]=r("div",{class:"login-footer"},[r("p",null,"智慧超市管理系统 v1.0")],-1))])])}}}),D=N(S,[["__scopeId","data-v-6824d092"]]);export{D as default};
